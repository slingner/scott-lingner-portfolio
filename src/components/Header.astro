---
import Container from "@components/Container.astro";
import Link from "@components/Link.astro";
import Pelican from "@components/Pelican.astro";
import { SITE } from "@consts";

const currentPath = Astro.url.pathname;
---

<header transition:persist class="bg-stone-100 dark:bg-stone-900">
  <Container>
    <div class="flex flex-wrap items-center gap-y-2">
      <Link href="/" underline={false}>
        <img
          src="/SCOTT1.png"
          alt={SITE.TITLE}
          class="h-28 w-auto object-contain transition-all dark:opacity-90 dark:brightness-0 dark:invert"
        />
      </Link>

      <nav class="ml-auto mr-4 hidden items-center gap-6 md:flex">
        <Link
          href="/"
          underline={false}
          class={`nav-link !text-stone-700 dark:!text-stone-300 hover:!text-stone-900 dark:hover:!text-stone-100 text-sm font-medium ${currentPath === "/" ? "active" : ""}`}
        >
          Home
        </Link>
        <Link
          href="/news"
          underline={false}
          class={`nav-link !text-stone-700 dark:!text-stone-300 hover:!text-stone-900 dark:hover:!text-stone-100 text-sm font-medium ${currentPath.startsWith("/news") ? "active" : ""}`}
        >
          News
        </Link>
        <div class="dropdown-wrapper group relative">
          <button
            class="nav-link inline-block text-sm font-medium text-stone-700 transition-all duration-300 hover:text-stone-900 dark:text-stone-300 dark:hover:text-stone-100"
          >
            Work â–¾
          </button>
          <div
            class="dropdown-menu invisible absolute left-0 top-full pt-2 opacity-0 transition-all duration-200 group-hover:visible group-hover:opacity-100"
          >
            <div
              class="w-48 rounded-lg border border-stone-300/50 bg-white shadow-lg dark:border-stone-700/50 dark:bg-stone-800"
            >
              <Link
                href="/software-engineering"
                underline={false}
                class="block px-4 py-2 text-sm hover:bg-stone-100 dark:hover:bg-stone-700"
              >
                Software
              </Link>
              <Link
                href="/music"
                underline={false}
                class="block px-4 py-2 text-sm hover:bg-stone-100 dark:hover:bg-stone-700"
              >
                Music
              </Link>
              <Link
                href="/stationery"
                underline={false}
                class="block px-4 py-2 text-sm hover:bg-stone-100 dark:hover:bg-stone-700"
              >
                Art
              </Link>
              <Link
                href="/photo"
                underline={false}
                class="block px-4 py-2 text-sm hover:bg-stone-100 dark:hover:bg-stone-700"
              >
                Photo
              </Link>
            </div>
          </div>
        </div>
        <Link
          href="/about"
          underline={false}
          class={`nav-link !text-stone-700 dark:!text-stone-300 hover:!text-stone-900 dark:hover:!text-stone-100 text-sm font-medium ${currentPath === "/about" ? "active" : ""}`}
        >
          About
        </Link>
      </nav>

      <!-- Search button - Commented out
      <button
        id="magnifying-glass"
        aria-label="Search"
        class="flex items-center rounded border border-stone-300/50 bg-stone-200/80 px-3 py-2 text-xs transition-all duration-300 ease-in-out hover:bg-stone-300/80 hover:text-stone-900 dark:border-stone-600/50 dark:bg-stone-700/80 dark:hover:bg-stone-600/50 dark:hover:text-stone-100"
      >
        <svg
          height="16"
          stroke-linejoin="round"
          viewBox="0 0 16 16"
          width="16"
          style="color: currentcolor;"
          ><path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M3.5 7C3.5 5.067 5.067 3.5 7 3.5C8.933 3.5 10.5 5.067 10.5 7C10.5 7.88461 10.1718 8.69256 9.63058 9.30876L9.30876 9.63058C8.69256 10.1718 7.88461 10.5 7 10.5C5.067 10.5 3.5 8.933 3.5 7ZM9.96544 11.0261C9.13578 11.6382 8.11014 12 7 12C4.23858 12 2 9.76142 2 7C2 4.23858 4.23858 2 7 2C9.76142 2 12 4.23858 12 7C12 8.11014 11.6382 9.13578 11.0261 9.96544L14.0303 12.9697L14.5607 13.5L13.5 14.5607L12.9697 14.0303L9.96544 11.0261Z"
            fill="currentColor"></path></svg
        >
        &nbsp;Search
      </button>
      -->
    </div>
  </Container>
</header>

<Pelican />

<style>
  .dropdown-wrapper {
    position: relative;
  }

  .dropdown-menu {
    z-index: 50;
  }

  .nav-link {
    position: relative;
    transition: all 0.3s ease;
    display: inline-block;
    vertical-align: baseline;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background-color: currentColor;
    transition: width 0.3s ease;
  }

  .nav-link:hover::after {
    width: 100%;
  }

  .nav-link.active::after {
    width: 100% !important;
  }
</style>
