---
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import Link from "@components/Link.astro";
import FormattedDate from "@components/FormattedDate.astro";
import TagBadge from "@components/TagBadge.astro";
import { getCollection } from "astro:content";

const newsItems = (await getCollection("news"))
  .filter((item) => !item.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout
  title="Music - Plastic Jaguar"
  description="Scott Lingner + Jordan Olberg's music project, Plastic Jaguar."
>
  <Container>
    <aside data-pagefind-ignore>
      <h1
        class="mb-8 mt-8 text-4xl font-bold text-stone-900 dark:text-stone-100 md:text-5xl"
      >
        MUSIC
      </h1>
      <p class="mt-8 max-w-lg text-lg text-stone-700 dark:text-stone-300">
        Plastic Jaguar is a band I started with Jordan Olberg.
      </p>

      <p class="mt-8 max-w-lg text-lg text-stone-700 dark:text-stone-300">
        I designed and developed our website to highlight our newest tracks,
        albums, and merch.
      </p>
      <p class="mt-8 max-w-lg text-lg text-stone-700 dark:text-stone-300">
        Our debut album, Afterparty, is releasing in 2026, mixed and mastered by <a
          href="https://www.benetter.com/"
          target="_blank"
          class="underline hover:text-stone-900 dark:hover:text-stone-100"
          rel="noopener noreferrer">Ben Etter</a
        >.
      </p>

      <a
        href="https://plasticjaguar.com"
        target="_blank"
        rel="noopener noreferrer"
        class="group relative mt-8 block w-full"
        aria-label="Plastic Jaguar Music Website (external link)"
      >
        <img
          src="/pj.png"
          alt="Plastic Jaguar Music Website External Link Photo"
          class="h-auto w-full rounded-lg border-2 border-stone-300 transition-shadow group-hover:shadow-lg dark:border-stone-700"
        />
        <!-- Overlay for hover effect -->
        <span
          class="pointer-events-none absolute inset-0 rounded-lg bg-stone-900/10 opacity-0 transition-opacity duration-200 group-hover:opacity-100 dark:bg-stone-100/10"
          aria-hidden="true"></span>
        <!-- Animated arrow -->
        <span
          class="absolute right-2 top-2 flex items-center justify-center rounded-full bg-stone-900/80 p-1 transition-transform duration-200 group-hover:-translate-y-1 group-hover:translate-x-1 dark:bg-stone-100/80"
          style="pointer-events:none;"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
            class="h-5 w-5 text-white dark:text-stone-900"
          >
            <path
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M7 17L17 7M17 7H9M17 7V15"></path>
          </svg>
        </span>
      </a>

      <h3
        class="mb-8 mt-8 text-2xl font-semibold text-stone-800 dark:text-stone-200"
      >
        Other Music Projects
      </h3>

      <div class="grid grid-cols-1 gap-8 md:grid-cols-2 md:gap-10">
        {
          // only music tagged items
          newsItems
            .filter(
              (item) => item.data.tags && item.data.tags.includes("music"),
            )
            .map((item) => (
              <article class="animate h-full">
                <Link href={`/news/${item.slug}`} class="group block h-full">
                  <div class="flex h-full flex-col overflow-hidden rounded-xl bg-white shadow-lg transition-all duration-500 hover:shadow-2xl dark:bg-stone-900">
                    {item.data.thumbnail && (
                      <div class="relative aspect-[16/10] overflow-hidden bg-stone-200 dark:bg-stone-800">
                        <img
                          src={item.data.thumbnail}
                          alt={item.data.title}
                          class="h-full w-full object-cover transition-all duration-700 group-hover:scale-105"
                        />
                        <div class="absolute left-4 top-4 flex flex-col gap-2">
                          <span class="inline-block rounded-full bg-stone-900/80 px-3 py-1 font-mono text-xs text-white backdrop-blur-sm dark:bg-stone-100/80 dark:text-stone-900">
                            <FormattedDate date={item.data.date} />
                          </span>
                          {item.data.tags && item.data.tags.length > 0 && (
                            <div class="flex flex-wrap gap-1">
                              {item.data.tags.map((tag) => (
                                <TagBadge tag={tag} />
                              ))}
                            </div>
                          )}
                        </div>
                      </div>
                    )}
                    <div class="flex flex-1 flex-col p-6 md:p-8">
                      <h2 class="mb-3 text-xl font-bold leading-tight text-stone-900 transition-colors group-hover:text-stone-700 dark:text-stone-100 dark:group-hover:text-stone-300 md:text-2xl">
                        {item.data.title}
                      </h2>
                      <p class="mb-4 flex-1 text-sm leading-relaxed text-stone-600 dark:text-stone-400 md:text-base">
                        {item.data.description}
                      </p>
                      <div class="flex items-center text-sm font-medium text-stone-700 transition-transform duration-300 group-hover:translate-x-2 dark:text-stone-300">
                        <span>Read more</span>
                        <svg
                          class="ml-2 h-4 w-4"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M17 8l4 4m0 0l-4 4m4-4H3"
                          />
                        </svg>
                      </div>
                    </div>
                  </div>
                </Link>
              </article>
            ))
        }
      </div>
    </aside>
  </Container>
</Layout>
